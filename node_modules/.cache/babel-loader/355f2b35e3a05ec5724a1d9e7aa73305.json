{"ast":null,"code":"import _classCallCheck from \"F:\\\\Train\\\\Three.js\\\\New folder\\\\infinite-scroll_mid\\\\infinite-scroll\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"F:\\\\Train\\\\Three.js\\\\New folder\\\\infinite-scroll_mid\\\\infinite-scroll\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"F:\\\\Train\\\\Three.js\\\\New folder\\\\infinite-scroll_mid\\\\infinite-scroll\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"F:\\\\Train\\\\Three.js\\\\New folder\\\\infinite-scroll_mid\\\\infinite-scroll\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"F:\\\\Train\\\\Three.js\\\\New folder\\\\infinite-scroll_mid\\\\infinite-scroll\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport Node from '../core/Node.js';\nimport Object3DNode from '../accessors/Object3DNode.js';\nimport PositionNode from '../accessors/PositionNode.js';\nimport UniformNode from '../core/UniformNode.js';\nimport OperatorNode from '../math/OperatorNode.js';\nimport MathNode from '../math/MathNode.js';\nimport { NodeUpdateType } from '../core/constants.js';\nimport { getDistanceAttenuation } from '../functions/BSDFs.js';\nimport { Color } from 'three';\nvar LightNode = /*#__PURE__*/function (_Node) {\n  _inherits(LightNode, _Node);\n  function LightNode() {\n    var _this;\n    var light = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    _classCallCheck(this, LightNode);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LightNode).call(this, 'vec3'));\n    _this.updateType = NodeUpdateType.Object;\n    _this.light = light;\n    _this._colorNode = new UniformNode(new Color());\n    _this._lightCutoffDistanceNode = new UniformNode(0);\n    _this._lightDecayExponentNode = new UniformNode(0);\n    return _this;\n  }\n  _createClass(LightNode, [{\n    key: \"getHash\",\n    value: function getHash() {\n      return this.light.uuid;\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      this._colorNode.value.copy(this.light.color).multiplyScalar(this.light.intensity);\n      this._lightCutoffDistanceNode.value = this.light.distance;\n      this._lightDecayExponentNode.value = this.light.decay;\n    }\n  }, {\n    key: \"generate\",\n    value: function generate(builder) {\n      var lightPositionView = new Object3DNode(Object3DNode.VIEW_POSITION);\n      var positionView = new PositionNode(PositionNode.VIEW);\n      var lVector = new OperatorNode('-', lightPositionView, positionView);\n      var lightDirection = new MathNode(MathNode.NORMALIZE, lVector);\n      var lightDistance = new MathNode(MathNode.LENGTH, lVector);\n      var lightAttenuation = getDistanceAttenuation({\n        lightDistance: lightDistance,\n        cutoffDistance: this._lightCutoffDistanceNode,\n        decayExponent: this._lightDecayExponentNode\n      });\n      var lightColor = new OperatorNode('*', this._colorNode, lightAttenuation);\n      lightPositionView.object3d = this.light;\n      var lightingModelFunction = builder.context.lightingModel;\n      if (lightingModelFunction !== undefined) {\n        var directDiffuse = builder.context.directDiffuse;\n        var directSpecular = builder.context.directSpecular;\n        lightingModelFunction({\n          lightDirection: lightDirection,\n          lightColor: lightColor,\n          directDiffuse: directDiffuse,\n          directSpecular: directSpecular\n        }, builder);\n      }\n    }\n  }]);\n  return LightNode;\n}(Node);\nexport default LightNode;","map":null,"metadata":{},"sourceType":"module"}