{"ast":null,"code":"import _classCallCheck from \"F:\\\\Train\\\\Three.js\\\\New folder\\\\infinite-scroll_mid\\\\infinite-scroll\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"F:\\\\Train\\\\Three.js\\\\New folder\\\\infinite-scroll_mid\\\\infinite-scroll\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"F:\\\\Train\\\\Three.js\\\\New folder\\\\infinite-scroll_mid\\\\infinite-scroll\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"F:\\\\Train\\\\Three.js\\\\New folder\\\\infinite-scroll_mid\\\\infinite-scroll\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"F:\\\\Train\\\\Three.js\\\\New folder\\\\infinite-scroll_mid\\\\infinite-scroll\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport { EventDispatcher, Vector3, Euler, Quaternion, MathUtils } from 'three';\n\n/**\n * W3C Device Orientation control (http://w3c.github.io/deviceorientation/spec-source-orientation.html)\n */\nvar DeviceOrientationControls = /*#__PURE__*/function (_EventDispatcher) {\n  _inherits(DeviceOrientationControls, _EventDispatcher);\n  // radians\n  function DeviceOrientationControls(object) {\n    var _this;\n    _classCallCheck(this, DeviceOrientationControls);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DeviceOrientationControls).call(this));\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"object\", void 0);\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"changeEvent\", {\n      type: 'change'\n    });\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"EPS\", 0.000001);\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"enabled\", true);\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"deviceOrientation\", {\n      alpha: 0,\n      beta: 0,\n      gamma: 0\n    });\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"screenOrientation\", 0);\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"alphaOffset\", 0);\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onDeviceOrientationChangeEvent\", function (event) {\n      _this.deviceOrientation = event;\n    });\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onScreenOrientationChangeEvent\", function () {\n      _this.screenOrientation = window.orientation || 0;\n    });\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"zee\", new Vector3(0, 0, 1));\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"euler\", new Euler());\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"q0\", new Quaternion());\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"q1\", new Quaternion(-Math.sqrt(0.5), 0, 0, Math.sqrt(0.5)));\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"setObjectQuaternion\", function (quaternion, alpha, beta, gamma, orient) {\n      _this.euler.set(beta, alpha, -gamma, 'YXZ'); // 'ZXY' for the device, but 'YXZ' for us\n\n      quaternion.setFromEuler(_this.euler); // orient the device\n\n      quaternion.multiply(_this.q1); // camera looks out the back of the device, not the top\n\n      quaternion.multiply(_this.q0.setFromAxisAngle(_this.zee, -orient)); // adjust for screen orientation\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"connect\", function () {\n      _this.onScreenOrientationChangeEvent(); // run once on load\n      // iOS 13+\n\n      if (window.DeviceOrientationEvent !== undefined && typeof window.DeviceOrientationEvent.requestPermission === 'function') {\n        window.DeviceOrientationEvent.requestPermission().then(function (response) {\n          if (response == 'granted') {\n            window.addEventListener('orientationchange', _this.onScreenOrientationChangeEvent);\n            window.addEventListener('deviceorientation', _this.onDeviceOrientationChangeEvent);\n          }\n        }).catch(function (error) {\n          console.error('THREE.DeviceOrientationControls: Unable to use DeviceOrientation API:', error);\n        });\n      } else {\n        window.addEventListener('orientationchange', _this.onScreenOrientationChangeEvent);\n        window.addEventListener('deviceorientation', _this.onDeviceOrientationChangeEvent);\n      }\n      _this.enabled = true;\n    });\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"disconnect\", function () {\n      window.removeEventListener('orientationchange', _this.onScreenOrientationChangeEvent);\n      window.removeEventListener('deviceorientation', _this.onDeviceOrientationChangeEvent);\n      _this.enabled = false;\n    });\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"lastQuaternion\", new Quaternion());\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"update\", function () {\n      if (_this.enabled === false) return;\n      var device = _this.deviceOrientation;\n      if (device) {\n        var alpha = device.alpha ? MathUtils.degToRad(device.alpha) + _this.alphaOffset : 0; // Z\n\n        var beta = device.beta ? MathUtils.degToRad(device.beta) : 0; // X'\n\n        var gamma = device.gamma ? MathUtils.degToRad(device.gamma) : 0; // Y''\n\n        var orient = _this.screenOrientation ? MathUtils.degToRad(_this.screenOrientation) : 0; // O\n\n        _this.setObjectQuaternion(_this.object.quaternion, alpha, beta, gamma, orient);\n        if (8 * (1 - _this.lastQuaternion.dot(_this.object.quaternion)) > _this.EPS) {\n          _this.lastQuaternion.copy(_this.object.quaternion);\n          _this.dispatchEvent(_this.changeEvent);\n        }\n      }\n    });\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"dispose\", function () {\n      return _this.disconnect();\n    });\n    _this.object = object;\n    _this.object.rotation.reorder('YXZ');\n    _this.connect();\n    return _this;\n  }\n  return DeviceOrientationControls;\n}(EventDispatcher);\nexport { DeviceOrientationControls };","map":null,"metadata":{},"sourceType":"module"}