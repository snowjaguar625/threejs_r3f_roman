{"ast":null,"code":"import _classCallCheck from \"F:\\\\Train\\\\Three.js\\\\New folder\\\\infinite-scroll\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"F:\\\\Train\\\\Three.js\\\\New folder\\\\infinite-scroll\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"F:\\\\Train\\\\Three.js\\\\New folder\\\\infinite-scroll\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"F:\\\\Train\\\\Three.js\\\\New folder\\\\infinite-scroll\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"F:\\\\Train\\\\Three.js\\\\New folder\\\\infinite-scroll\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport { Vector3, EventDispatcher, Spherical, MathUtils } from 'three';\nvar targetPosition = new Vector3();\nvar FirstPersonControls = /*#__PURE__*/function (_EventDispatcher) {\n  _inherits(FirstPersonControls, _EventDispatcher);\n  // internals\n  function FirstPersonControls(object, _domElement) {\n    var _this;\n    _classCallCheck(this, FirstPersonControls);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(FirstPersonControls).call(this));\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"object\", void 0);\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"domElement\", void 0);\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"enabled\", true);\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"movementSpeed\", 1.0);\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"lookSpeed\", 0.005);\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"lookVertical\", true);\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"autoForward\", false);\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"activeLook\", true);\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"heightSpeed\", false);\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"heightCoef\", 1.0);\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"heightMin\", 0.0);\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"heightMax\", 1.0);\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"constrainVertical\", false);\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"verticalMin\", 0);\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"verticalMax\", Math.PI);\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"mouseDragOn\", false);\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"autoSpeedFactor\", 0.0);\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"mouseX\", 0);\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"mouseY\", 0);\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"moveForward\", false);\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"moveBackward\", false);\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"moveLeft\", false);\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"moveRight\", false);\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"moveUp\", false);\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"moveDown\", false);\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"viewHalfX\", 0);\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"viewHalfY\", 0);\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"lat\", 0);\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"lon\", 0);\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"lookDirection\", new Vector3());\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"spherical\", new Spherical());\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"target\", new Vector3());\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"connect\", function (domElement) {\n      domElement.setAttribute('tabindex', '-1');\n      domElement.style.touchAction = 'none';\n      domElement.addEventListener('contextmenu', _this.contextmenu);\n      domElement.addEventListener('mousemove', _this.onMouseMove);\n      domElement.addEventListener('mousedown', _this.onMouseDown);\n      domElement.addEventListener('mouseup', _this.onMouseUp);\n      _this.domElement = domElement;\n      window.addEventListener('keydown', _this.onKeyDown);\n      window.addEventListener('keyup', _this.onKeyUp);\n      _this.handleResize();\n    });\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"dispose\", function () {\n      var _this$domElement, _this$domElement2, _this$domElement3, _this$domElement4;\n      (_this$domElement = _this.domElement) === null || _this$domElement === void 0 ? void 0 : _this$domElement.removeEventListener('contextmenu', _this.contextmenu);\n      (_this$domElement2 = _this.domElement) === null || _this$domElement2 === void 0 ? void 0 : _this$domElement2.removeEventListener('mousedown', _this.onMouseDown);\n      (_this$domElement3 = _this.domElement) === null || _this$domElement3 === void 0 ? void 0 : _this$domElement3.removeEventListener('mousemove', _this.onMouseMove);\n      (_this$domElement4 = _this.domElement) === null || _this$domElement4 === void 0 ? void 0 : _this$domElement4.removeEventListener('mouseup', _this.onMouseUp);\n      window.removeEventListener('keydown', _this.onKeyDown);\n      window.removeEventListener('keyup', _this.onKeyUp);\n    });\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"handleResize\", function () {\n      if (_this.domElement) {\n        _this.viewHalfX = _this.domElement.offsetWidth / 2;\n        _this.viewHalfY = _this.domElement.offsetHeight / 2;\n      }\n    });\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onMouseDown\", function (event) {\n      var _this$domElement5;\n      (_this$domElement5 = _this.domElement) === null || _this$domElement5 === void 0 ? void 0 : _this$domElement5.focus();\n      if (_this.activeLook) {\n        switch (event.button) {\n          case 0:\n            _this.moveForward = true;\n            break;\n          case 2:\n            _this.moveBackward = true;\n            break;\n        }\n      }\n      _this.mouseDragOn = true;\n    });\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onMouseUp\", function (event) {\n      if (_this.activeLook) {\n        switch (event.button) {\n          case 0:\n            _this.moveForward = false;\n            break;\n          case 2:\n            _this.moveBackward = false;\n            break;\n        }\n      }\n      _this.mouseDragOn = false;\n    });\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onMouseMove\", function (event) {\n      if (_this.domElement) {\n        _this.mouseX = event.pageX - _this.domElement.offsetLeft - _this.viewHalfX;\n        _this.mouseY = event.pageY - _this.domElement.offsetTop - _this.viewHalfY;\n      }\n    });\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onKeyDown\", function (event) {\n      switch (event.code) {\n        case 'ArrowUp':\n        case 'KeyW':\n          _this.moveForward = true;\n          break;\n        case 'ArrowLeft':\n        case 'KeyA':\n          _this.moveLeft = true;\n          break;\n        case 'ArrowDown':\n        case 'KeyS':\n          _this.moveBackward = true;\n          break;\n        case 'ArrowRight':\n        case 'KeyD':\n          _this.moveRight = true;\n          break;\n        case 'KeyR':\n          _this.moveUp = true;\n          break;\n        case 'KeyF':\n          _this.moveDown = true;\n          break;\n      }\n    });\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onKeyUp\", function (event) {\n      switch (event.code) {\n        case 'ArrowUp':\n        case 'KeyW':\n          _this.moveForward = false;\n          break;\n        case 'ArrowLeft':\n        case 'KeyA':\n          _this.moveLeft = false;\n          break;\n        case 'ArrowDown':\n        case 'KeyS':\n          _this.moveBackward = false;\n          break;\n        case 'ArrowRight':\n        case 'KeyD':\n          _this.moveRight = false;\n          break;\n        case 'KeyR':\n          _this.moveUp = false;\n          break;\n        case 'KeyF':\n          _this.moveDown = false;\n          break;\n      }\n    });\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"lookAt\", function (x, y, z) {\n      if (x instanceof Vector3) {\n        _this.target.copy(x);\n      } else if (y && z) {\n        _this.target.set(x, y, z);\n      }\n      _this.object.lookAt(_this.target);\n      _this.setOrientation();\n      return _assertThisInitialized(_assertThisInitialized(_this));\n    });\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"update\", function (delta) {\n      if (!_this.enabled) return;\n      if (_this.heightSpeed) {\n        var y = MathUtils.clamp(_this.object.position.y, _this.heightMin, _this.heightMax);\n        var heightDelta = y - _this.heightMin;\n        _this.autoSpeedFactor = delta * (heightDelta * _this.heightCoef);\n      } else {\n        _this.autoSpeedFactor = 0.0;\n      }\n      var actualMoveSpeed = delta * _this.movementSpeed;\n      if (_this.moveForward || _this.autoForward && !_this.moveBackward) {\n        _this.object.translateZ(-(actualMoveSpeed + _this.autoSpeedFactor));\n      }\n      if (_this.moveBackward) _this.object.translateZ(actualMoveSpeed);\n      if (_this.moveLeft) _this.object.translateX(-actualMoveSpeed);\n      if (_this.moveRight) _this.object.translateX(actualMoveSpeed);\n      if (_this.moveUp) _this.object.translateY(actualMoveSpeed);\n      if (_this.moveDown) _this.object.translateY(-actualMoveSpeed);\n      var actualLookSpeed = delta * _this.lookSpeed;\n      if (!_this.activeLook) {\n        actualLookSpeed = 0;\n      }\n      var verticalLookRatio = 1;\n      if (_this.constrainVertical) {\n        verticalLookRatio = Math.PI / (_this.verticalMax - _this.verticalMin);\n      }\n      _this.lon -= _this.mouseX * actualLookSpeed;\n      if (_this.lookVertical) _this.lat -= _this.mouseY * actualLookSpeed * verticalLookRatio;\n      _this.lat = Math.max(-85, Math.min(85, _this.lat));\n      var phi = MathUtils.degToRad(90 - _this.lat);\n      var theta = MathUtils.degToRad(_this.lon);\n      if (_this.constrainVertical) {\n        phi = MathUtils.mapLinear(phi, 0, Math.PI, _this.verticalMin, _this.verticalMax);\n      }\n      var position = _this.object.position;\n      targetPosition.setFromSphericalCoords(1, phi, theta).add(position);\n      _this.object.lookAt(targetPosition);\n    });\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"contextmenu\", function (event) {\n      return event.preventDefault();\n    });\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"setOrientation\", function () {\n      _this.lookDirection.set(0, 0, -1).applyQuaternion(_this.object.quaternion);\n      _this.spherical.setFromVector3(_this.lookDirection);\n      _this.lat = 90 - MathUtils.radToDeg(_this.spherical.phi);\n      _this.lon = MathUtils.radToDeg(_this.spherical.theta);\n    });\n    _this.object = object;\n    _this.domElement = _domElement;\n    _this.setOrientation();\n    if (_domElement) _this.connect(_domElement);\n    return _this;\n  }\n  return FirstPersonControls;\n}(EventDispatcher);\nexport { FirstPersonControls };","map":null,"metadata":{},"sourceType":"module"}